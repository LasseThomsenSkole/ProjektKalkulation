<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Alle Projekter</title>
    <link rel="icon" href="/img/logo_alpha.png" type="image/x-icon">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css" type="text/css">
</head>
<body>
<div th:insert="~{fragments/header :: header}"></div>

<div class="main-content mt-5">
    <h2>Projekter Oversigt</h2>
    <!-- Projekter Oversigt -->
    <table class="table">
        <!-- Table header -->
        <thead class="thead-dark">
        <!-- Table header columns -->
        <tr>
            <th>ID</th>
            <th>Navn</th>
            <th>Beskrivelse</th>
            <th>Total Timer</th>
            <th>Deadline</th>
            <th>Status</th>
            <th>Ændre Status</th> <!-- Tilføjede kolonne til redigeringsknapper -->
        </tr>
        </thead>
        <!-- Table body -->
        <tbody>
        <!-- Iterer gennem projekter -->
        <tr th:each="project : ${projects}">
            <!-- Projektdata -->
            <td th:text="${project.id}"></td>
            <td><a th:href="@{/project/{id}(id=${project.id})}" th:text="${project.name}" style="color: #c7156f"></a></td>
            <td th:text="${project.description}"></td>
            <td th:text="${project.totalHours}"></td>
            <td th:text="${#dates.format(project.deadline, 'dd-MM-yyyy')}"></td>
            <td th:text="${project.status.displayName}"></td>
            <td>
                <!-- Formular to change status -->
                <form th:action="@{'/teamprojects/' + ${project.id} + '/status'}" method="post">
                    <label>
                        <select name="newStatus">
                            <option value="DONE" th:selected="${project.status == 'DONE'}">Færdig</option>
                            <option value="IN_PROGRESS" th:selected="${project.status == 'IN_PROGRESS'}">I gang</option>
                            <option value="TO_DO" th:selected="${project.status == 'TO_DO'}">At gøre</option>
                            <option value="ARCHIVED" th:selected="${project.status == 'ARCHIVED'}">Arkiveret</option>
                            <option value="NOT_STARTED" th:selected="${project.status == 'NOT_STARTED'}">Ikke påbegyndt</option>
                        </select>
                    </label>
                    <button type="submit">Gem</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <a href="/teamprojects/create" class="btn btn-primary">Tilføj Nyt Projekt</a>
</div>

<div th:insert="~{fragments/footer :: footer}"></div>
</body>
</html>